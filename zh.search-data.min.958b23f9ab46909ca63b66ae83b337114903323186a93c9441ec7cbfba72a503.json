[{"id":0,"href":"/docs/%E7%AC%94%E8%AE%B0%E6%9C%AC/win11-ltsc/%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F/","title":"安装系统","section":"windows 11","content":" 系统安装 # 推荐使用LTSC,专业版需登录账号才能完成安装 "},{"id":1,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/frp/","title":"frp内网穿透","section":"软件使用","content":" FRP内网穿透 # https://github.com/fatedier/frp/ https://github.com/fatedier/frp/releases/download/v0.61.1/frp_0.61.1_linux_amd64.tar.gz 服务端 # wget https://github.com/fatedier/frp/releases/download/v0.61.1/frp_0.61.1_linux_amd64.tar.gz tar -zxvf frp_0.61.1_linux_amd64.tar.gz --transform=\u0026#34;s|frp_0.61.1_linux_amd64|frp|g\u0026#34; ./frp/frps -c ./frp/frps.toml 客户端 # 因服务端不在127.0.0.1,直接替换(未备案的域名可能被拦截无法访问,最好用IP) 测试 ssh ali.mm -p 6000 修改后缀.toml为.ini可以不输入参数 sed -i \u0026#39;s|serverAddr = \u0026#34;127.0.0.1\u0026#34;|serverAddr = \u0026#34;ali.mm\u0026#34;|g\u0026#39; ./frp/frpc.toml ./frp/frpc -c ./frp/frpc.toml 免费FRP # 免费网站https://freefrp.com/\nfrpc.toml 启动: #./frpc -c frpc.toml 网页 http://public.freefrp.org:59876 serverAddr = \u0026#34;public.freefrp.org\u0026#34; auth.token = \u0026#34;public.freefrp.com\u0026#34; serverPort = 8000 [[proxies]] name = \u0026#34;uzicjb\u0026#34; type = \u0026#34;tcp\u0026#34; localIP = \u0026#34;6.mm\u0026#34; localPort = 80 remotePort = 59876 "},{"id":2,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/goaccess/","title":"goaccess日志分析","section":"软件使用","content":" goaccess # 安装 # apt install -y goaccess sed -i \u0026#39;$a log-format COMBINED\u0026#39; /etc/goaccess/goaccess.conf 生成页面 # goaccess /var/log/nginx/access.log -o 1.html "},{"id":3,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AF%87/hadoop3.4.1-singlecluster/","title":"Hadoop 3.4.1 单机版","section":"分布式篇","content":" Hadoop 3.4.1 单机版 # https://www.runoob.com/w3cnote/hadoop-tutorial.html https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SingleCluster.html 目前JDK11能正常使用,JDK17网页无法使用上传下载 root操作 # export HADOOP_VERSION=3.4.1 wget https://dlcdn.apache.org/hadoop/common/hadoop-${HADOOP_VERSION}/hadoop-${HADOOP_VERSION}.tar.gz sed -i \u0026#34;s|bookworm-updates|bookworm-updates bullseye|g\u0026#34; /etc/apt/sources.list.d/debian.sources apt update \u0026amp;\u0026amp; apt install openjdk-11-jdk-headless -y sed -i \u0026#39;$aexport HADOOP_VERSION=\\$HADOOP_VERSION\u0026#39; /etc/profile sed -i \u0026#39;$aexport JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\u0026#39; /etc/profile sed -i \u0026#39;$aexport HADOOP_HOME=/opt/hadoop\u0026#39; /etc/profile sed -i \u0026#39;$aPATH=\\$PATH:\\$JAVA_HOME/bin/:\\$HADOOP_HOME/bin:\\$HADOOP_HOME/sbin\u0026#39; /etc/profile sudo useradd -ms/bin/bash -k/etc/skel/ hadoop sudo usermod -aG sudo hadoop echo hadoop:. | chpasswd tar -zxvf hadoop-${HADOOP_VERSION}.tar.gz -C /opt/ --transform=\u0026#34;s|hadoop-${HADOOP_VERSION}|hadoop|g\u0026#34; rm hadoop-${HADOOP_VERSION}.tar.gz sed -i \u0026#34;1 i JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\u0026#34; /opt/hadoop/etc/hadoop/hadoop-env.sh find /opt/hadoop/ -name *cmd -delete mkdir /opt/hadoop/data chown hadoop /opt -R 文档(可以不做) 文档 管理 apt install nginx -y cp /opt/hadoop/share/doc/hadoop/* /var/www/html -r nginx hadoop免登录hadoop # mkdir ~/.ssh echo \u0026#34;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQDR5HpVwM8VvMcfS+gJBkW/IS6n7Pgcd1Rkq6AbxP7aShCFJewuPhQM6FslaARkWoAgH4wC3qtMxLkZ5fNgAPFewYEYuJXARGOIuBoAtwJYc7KYoDeYwkhFcnsWWAWezYOtqG3IapRfIgOcx3+j7HditZAn5nCsZit4WZAD+VdW3w== \u0026#34; \u0026gt;\u0026gt; ~/.ssh/authorized_keys chmod 700 ~/.ssh chmod 644 ~/.ssh/authorized_keys cat \u0026gt; ~/.ssh/id_rsa \u0026lt;\u0026lt;EOF -----BEGIN OPENSSH PRIVATE KEY----- b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAlwAAAAdzc2gtcn NhAAAAAwEAAQAAAIEA0eR6VcDPFbzHH0voCQZFvyEup+z4HHdUZKugG8T+2koQhSXsLj4U DOhbJWgEZFqAIB+MAt6rTMS5GeXzYADxXsGBGLiVwERjiLgaALcCWHOymKA3mMJIRXJ7Fl gFns2DrahtyGqUXyIDnMd/o+x3YrWQJ+ZwrGYreFmQA/lXVt8AAAIIeMsZxnjLGcYAAAAH c3NoLXJzYQAAAIEA0eR6VcDPFbzHH0voCQZFvyEup+z4HHdUZKugG8T+2koQhSXsLj4UDO hbJWgEZFqAIB+MAt6rTMS5GeXzYADxXsGBGLiVwERjiLgaALcCWHOymKA3mMJIRXJ7FlgF ns2DrahtyGqUXyIDnMd/o+x3YrWQJ+ZwrGYreFmQA/lXVt8AAAADAQABAAAAgEsyyIGgqp DnKZAU6fURwjtP8B9JzzqjpiDLPHm2gnhCwNhzVcLbiuN0+/LS6X/qzKy1oLwGeujuMkMN F7z1mYPqqcZmpVj97BF7ITQuzVJdEs6ujva/arp3V/FQYECLGHJ+pz+IBkJhVaXpKeLJOD aeESEOy3jCp66fH6mFiFvBAAAAQGNHUW02lSyOGdoIPvxVk+boTXuZNYENCKOtBHTxX1Fd vQBFMuWWvk0dEHZ1sSbGds+CHrrMGEJN6aIxKXSuKdoAAABBAPyYTB4PV6WpKiJPAy/F6m MViOnfjfiX9/KqFYENd5EElm8FjjJ0lmC6YwJsSOPaB18BSmi2LpG9+QB7ujMHcgUAAABB ANS40Jx9hA9HJ3gFQ06GS5Xr3sPjoOqkmCPFC+nhNBvdOxUwxfVsKly3qI5jjs9zZ3sben 5ge2hwzEq0xZMtxpMAAAAMcm9vdEB0ZXN0Lm1tAQIDBAUGBw== -----END OPENSSH PRIVATE KEY----- EOF chmod 600 ~/.ssh/id_rsa hadoop操作 # /opt/hadoop/etc/core-site.xml:①使用单机网络模式 ②网页默认用户为hadoop /opt/hadoop/etc/hdfs-site.xml:①只使用一个副本 /opt/hadoop/etc/hadoop/yarn-site.xml /opt/hadoop/etc/hadoop/mapred-site.xml /opt/hadoop/etc/hadoop/workers sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;fs.defaultFS\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;hdfs://localhost:9000\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/core-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;hadoop.http.staticuser.user\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;hadoop\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/core-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;hadoop.tmp.dir\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;${HADOOP_HOME}/data/\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/core-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;dfs.replication\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;1\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/hdfs-site.xml sed -i \u0026#34;16 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;yarn.resourcemanager.hostname\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;0.0.0.0\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/yarn-site.xml sed -i \u0026#34;16 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;yarn.nodemanager.aux-services\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;mapreduce_shuffle\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/yarn-site.xml sed -i \u0026#34;16 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;yarn.application.classpath\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;`hadoop classpath`\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/yarn-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;mapreduce.framework.name\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;yarn\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/mapred-site.xml 启动命令 # 必须先格式化节点 hdfs namenode -format \u0026amp;\u0026amp; start-dfs.sh echo \u0026#34;formathadoop=hdfs namenode -format\u0026#34; \u0026gt;\u0026gt; ~/.bashrc echo \u0026#34;alias starthadoop=\\${HADOOP_HOME}/sbin/start-all.sh\u0026#34; \u0026gt;\u0026gt; ~/.bashrc echo \u0026#34;alias stophadoop=\\${HADOOP_HOME}/sbin/stop-all.sh\u0026#34; \u0026gt;\u0026gt; ~/.bashrc "},{"id":4,"href":"/docs/%E7%AC%94%E8%AE%B0%E6%9C%AC/win11-ltsc/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/","title":"系统优化","section":"windows 11","content":" 系统优化 # "},{"id":5,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AF%87/hadoop3.4.1-clustersetup/","title":"Hadoop 3.4.1 集群版","section":"分布式篇","content":" Hadoop 3.4.1 集群版之HDFS # https://www.runoob.com/w3cnote/hadoop-tutorial.html\nroot操作(建议docker打包) # sed -i \u0026#34;s|bookworm-updates|bookworm-updates bullseye|g\u0026#34; /etc/apt/sources.list.d/debian.sources apt update \u0026amp;\u0026amp; apt install -y openjdk-11-jdk sudo apt install openjdk-11-jdk-headless -y sed -i \u0026#39;$aPATH=\\$PATH:/usr/games:/opt/hadoop/bin:/opt/hadoop/sbin\u0026#39; /etc/profile sed -i \u0026#39;$aexport JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/\u0026#39; /etc/profile sed -i \u0026#39;$aexport HADOOP_HOME=/opt/hadoop/\u0026#39; /etc/profile source /etc/profile sudo useradd -ms/bin/bash -k/etc/skel/ hadoop sudo usermod -aG sudo hadoop echo hadoop:. | chpasswd cd /opt wget https://dlcdn.apache.org/hadoop/common/hadoop/hadoop.tar.gz tar -zxvf hadoop.tar.gz sed -i \u0026#34;1 i JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\u0026#34; /opt/hadoop/etc/hadoop/hadoop-env.sh mv /opt/hadoop.tar.gz /opt/hadoop find /opt/hadoop/ -name *cmd -delete mkdir /opt/hadoop/data chown hadoop /opt -R 免登录 # 每台机器都要执行,此密钥仅作为示例ssh-keygen -t rsa -b 1024 mkdir ~/.ssh echo \u0026#34;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQDR5HpVwM8VvMcfS+gJBkW/IS6n7Pgcd1Rkq6AbxP7aShCFJewuPhQM6FslaARkWoAgH4wC3qtMxLkZ5fNgAPFewYEYuJXARGOIuBoAtwJYc7KYoDeYwkhFcnsWWAWezYOtqG3IapRfIgOcx3+j7HditZAn5nCsZit4WZAD+VdW3w== \u0026#34; \u0026gt;\u0026gt; ~/.ssh/authorized_keys chmod 700 ~/.ssh chmod 644 ~/.ssh/authorized_keys cat \u0026gt; ~/.ssh/id_rsa \u0026lt;\u0026lt;EOF -----BEGIN OPENSSH PRIVATE KEY----- b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAlwAAAAdzc2gtcn NhAAAAAwEAAQAAAIEA0eR6VcDPFbzHH0voCQZFvyEup+z4HHdUZKugG8T+2koQhSXsLj4U DOhbJWgEZFqAIB+MAt6rTMS5GeXzYADxXsGBGLiVwERjiLgaALcCWHOymKA3mMJIRXJ7Fl gFns2DrahtyGqUXyIDnMd/o+x3YrWQJ+ZwrGYreFmQA/lXVt8AAAIIeMsZxnjLGcYAAAAH c3NoLXJzYQAAAIEA0eR6VcDPFbzHH0voCQZFvyEup+z4HHdUZKugG8T+2koQhSXsLj4UDO hbJWgEZFqAIB+MAt6rTMS5GeXzYADxXsGBGLiVwERjiLgaALcCWHOymKA3mMJIRXJ7FlgF ns2DrahtyGqUXyIDnMd/o+x3YrWQJ+ZwrGYreFmQA/lXVt8AAAADAQABAAAAgEsyyIGgqp DnKZAU6fURwjtP8B9JzzqjpiDLPHm2gnhCwNhzVcLbiuN0+/LS6X/qzKy1oLwGeujuMkMN F7z1mYPqqcZmpVj97BF7ITQuzVJdEs6ujva/arp3V/FQYECLGHJ+pz+IBkJhVaXpKeLJOD aeESEOy3jCp66fH6mFiFvBAAAAQGNHUW02lSyOGdoIPvxVk+boTXuZNYENCKOtBHTxX1Fd vQBFMuWWvk0dEHZ1sSbGds+CHrrMGEJN6aIxKXSuKdoAAABBAPyYTB4PV6WpKiJPAy/F6m MViOnfjfiX9/KqFYENd5EElm8FjjJ0lmC6YwJsSOPaB18BSmi2LpG9+QB7ujMHcgUAAABB ANS40Jx9hA9HJ3gFQ06GS5Xr3sPjoOqkmCPFC+nhNBvdOxUwxfVsKly3qI5jjs9zZ3sben 5ge2hwzEq0xZMtxpMAAAAMcm9vdEB0ZXN0Lm1tAQIDBAUGBw== -----END OPENSSH PRIVATE KEY----- EOF chmod 600 ~/.ssh/id_rsa 修改配置 # /opt/hadoop/etc/hadoop/core-site.xml /opt/hadoop/etc/hadoop/hdfs-site.xml /opt/hadoop/etc/hadoop/yarn-site.xml /opt/hadoop/etc/hadoop/mapred-site.xml /opt/hadoop/etc/hadoop/workers sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;fs.defaultFS\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;hdfs://200.mm:9000\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; /opt/hadoop/etc/hadoop/core-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;hadoop.http.staticuser.user\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;hadoop\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; /opt/hadoop/etc/hadoop/core-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;hadoop.tmp.dir\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;/opt/data/\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; /opt/hadoop/etc/hadoop/core-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;dfs.replication\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;2\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; /opt/hadoop/etc/hadoop/hdfs-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;dfs.datanode.data.dir\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;/opt/data/\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; /opt/hadoop/etc/hadoop/hdfs-site.xml sed -i \u0026#34;16 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;yarn.resourcemanager.hostname\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;200.mm\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; /opt/hadoop/etc/hadoop/yarn-site.xml sed -i \u0026#34;16 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;yarn.nodemanager.aux-services\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;mapreduce_shuffle\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; /opt/hadoop/etc/hadoop/yarn-site.xml sed -i \u0026#34;16 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;yarn.application.classpath\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;`hadoop classpath`\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; /opt/hadoop/etc/hadoop/yarn-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;mapreduce.framework.name\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;yarn\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; /opt/hadoop/etc/hadoop/mapred-site.xml echo -e \u0026#39;200.mm\\n201.mm\\n202.mm\u0026#39; \u0026gt; /opt/hadoop/etc/hadoop/workers 主机启动 # 先格式化 hdfs namenode -format start-dfs.sh 添加节点 # 新节点重复以上操作 master登录一次新节点,确保免登录生效 masterd的workers记录要更新 在新的机器执行 hdfs --daemon start datanode echo -e \u0026#39;200.mm\\n201.mm\\n202.mm\\n203.mm\u0026#39; \u0026gt; /opt/hadoop/etc/hadoop/workers docker基础配置 version: \u0026#34;3.8\u0026#34; #https://docs.docker.com/compose/compose-file/compose-file-v3/ networks: macvlan: driver: macvlan driver_opts: #parent: enp8s0 parent: enp6s0 ipam: config: - subnet: 10.0.0.200/24 ip_range: 10.0.0.200/28 gateway: 10.0.0.1 services: master: container_name: master hostname: 200.mm image: debian12.x tty: true mac_address: 02-00-00-00-00-00 networks: macvlan: ipv4_address: 10.0.0.200 salver1: container_name: salver1 hostname: 201.mm image: debian12.x tty: true mac_address: 02-01-00-00-00-00 networks: macvlan: ipv4_address: 10.0.0.201 salver2: container_name: salver2 hostname: 202.mm image: debian12.x tty: true mac_address: 02-02-00-00-00-00 networks: macvlan: ipv4_address: 10.0.0.202 salver3: container_name: salver3 hostname: 203.mm image: debian12.x tty: true mac_address: 02-03-00-00-00-00 networks: macvlan: ipv4_address: 10.0.0.203 "},{"id":6,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AF%87/hadoop3.4.1-%E8%BF%90%E7%BB%B4%E7%AF%87/","title":"Hadoop 3.4.1 运维篇","section":"分布式篇","content":" hadoop 3.4.1 运维篇 # 块损坏与丢失 # 损坏或丢失会进入安全模式 hdfs dfsadmin -safemode get\t#查看安全模式状态 hdfs dfsadmin -safemode enter\t#进入安全模式状态 hdfs dfsadmin -safemode leave\t#离开安全模式状态 hdfs dfsadmin -safemode wait\t#等待安全模式状态 hadoop fsck\t#检查时候存在丢失或者损坏 hdfs fsck / -delete\t#删除问题文件,在获得问题的解决办法前不建议使用 测试数据 # 写入100个128M的数据 for x in {1..100};do dd if=/dev/random of=$RANDOM bs=1M count=128;done hadoop fs -put * /4m 查找文件 # find /opt/ -mmin -30 find /opt/ -exec touch -ht 197001010000.00 {} \\; rm /opt/data/* /opt/hadoop-3.4.1/logs/* -rf find /opt/ -name *meta 空间管理 # 只分配1G能启动,但存储不了文件 The volume with the most available space (=950 190 080 B) is less than the block size (=134 217 728 B) sudo mkdir /home/hadoop/space/ -p sudo dd if=/dev/zero of=/home/hadoop/space/hadoop0 bs=1G count=2 sudo dd if=/dev/zero of=/home/hadoop/space/hadoop1 bs=1G count=2 sudo dd if=/dev/zero of=/home/hadoop/space/hadoop2 bs=1G count=2 sudo dd if=/dev/zero of=/home/hadoop/space/hadoop3 bs=1G count=2 sudo losetup /dev/loop0 /home/hadoop/space/hadoop0 sudo losetup /dev/loop1 /home/hadoop/space/hadoop1 sudo losetup /dev/loop2 /home/hadoop/space/hadoop2 sudo losetup /dev/loop3 /home/hadoop/space/hadoop3 sudo mkfs.ext4 /dev/loop0 sudo mkfs.ext4 /dev/loop1 sudo mkfs.ext4 /dev/loop2 sudo mkfs.ext4 /dev/loop3 sudo mount -t ext4 /dev/loop0 /home/hadoop/hadoop0 sudo mount -t ext4 /dev/loop1 /home/hadoop/hadoop1 sudo mount -t ext4 /dev/loop2 /home/hadoop/hadoop2 sudo mount -t ext4 /dev/loop3 /home/hadoop/hadoop3 sudo chmod 777 /home/hadoop/hadoop* -R 删除虚拟驱动 sudo losetup -d /dev/loop0 /dev/loop1 /dev/loop2 /dev/loop3 "},{"id":7,"href":"/docs/%E7%AC%94%E8%AE%B0%E6%9C%AC/win11-ltsc/wsl1/","title":"WSL1","section":"windows 11","content":" WSL1 # https://learn.microsoft.com/zh-cn/windows/wsl/install-manual#downloading-distributions Ubuntu 24.04 Debian wsl.exe --update https://github.com/microsoft/WSL/releases/download/2.3.26/wsl.2.3.26.0.x64.msi Add-AppxPackage .\\app_name.appx 配置 # echo \u0026#34;deb http://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main\u0026#34; | sudo tee /etc/apt/sources.list sudo apt update sudo apt install bash-completion /etc/wsl.conf [boot] systemd=true [network] hostname = redmibook.com generateHosts = false 常用命令 # wsl --shutdown 未解决 # networkingMode Nat\n"},{"id":8,"href":"/posts/2024-11-11/","title":"影视资源","section":"日记本","content":" 种子下载 # 获取元文件 https://webtor.io/ 元数据编辑64位 https://torrent-file-editor.github.io/ 旧BE，需要到谷歌网盘下载 https://sites.google.com/site/ultimasites/files 四人拼接结果 ed2k://|file|4ren.mp4|4483035686|AA06C4FFF569C937A81E51F8023F8FFA|/ 能下载\nBT编辑器 # apt install aria2\rhttps://github.com/torrent-file-editor/torrent-file-editor/releases/download/v1.0.0/torrent-file-editor-1.0.0-x64.exe 浆果儿 # magnet:?xt=urn:btih:9d6f242a44d2cf99ec89b6ed8b43663f11748495\u0026amp;dn=%E6%B5%86%E6%9E%9C%E5%84%BF 岳欣月 # magnet:?xt=urn:btih:e9aa39b943b7f90e6be196f580faa6397ad07a1d\u0026amp;dn=%E3%80%90%E9%9C%87%E6%83%8A%E2%9D%A4%EF%B8%8F%E7%BD%91%E6%9B%9D%E7%83%AD%E9%97%A8%E4%BA%8B%E4%BB%B6%E3%80%91%E8%B6%85%E7%81%AB%E7%88%86%E5%90%89%E6%9E%97%E5%A5%B3%E5%AD%A9%E5%B2%B3%E6%AC%A3%E6%9C%88%E5%A4%9A%E4%BA%BA%E8%BF%90%E5%8A%A8%E4%B8%8D%E9%9B%85%E7%A7%81%E6%8B%8D%E6%B5%81%E5%87%BA%20%E7%96%AF%E7%8B%8210P%E4%B9%B1%E6%93%8D%20%E5%9B%BD%E4%BA%A7%E5%A4%A7%E4%B9%B1%E4%BA%A4%20%E5%A0%AA%E6%AF%94AV%20%E9%AB%98%E6%B8%85720P%E5%AE%8C%E6%95%B4%E7%89%88\u0026amp;tr=http%3A%2F%2Fsukebei.tracker.wf%3A8888%2Fannounce\u0026amp;tr=udp%3A%2F%2Fopen.stealth.si%3A80%2Fannounce\u0026amp;tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce\u0026amp;tr=udp%3A%2F%2Fexodus.desync.com%3A6969%2Fannounce\u0026amp;tr=udp%3A%2F%2Ftracker.torrent.eu.org%3A451%2Fannounce 紫色面具 # 其实只有14个不重复文件 magnet:?xt=urn:btih:9299f4be2d5b26f8fe7ab0b17a8c6a7d63af0f84\u0026amp;dn=%E7%B4%AB%E8%89%B2%E9%9D%A2%E5%85%B7\r4b0931f2a5a1bcd10b9a06afeea96f5c 3.mp4\re57de350277cc8086f300244689749be 5.mp4\r0f74b1f26b6421e4a1786088ae142267 9.mp4\re16f7b311aa849c7b5432d66da76f958 紫色面具 (10).mp4\r51eab4935abaa1c9b55ab3bf82a73110 紫色面具 (11).mp4\rdf88b75692efd9d308f03c020f0f15ba 紫色面具 (1).mp4\rd5e49d4c7354463487986cafaeada2dd 紫色面具 (2).mp4\rb195c894cc439b130f9585c0e87b872e 紫色面具 (3).mp4\r8168b209befaeafde0bf9164da67323d 紫色面具 (4).mp4\r76444c6eeef02580b3c7a313a18b8650 紫色面具 (5).mp4\r794c96907cf245d27b8d9a2075b73351 紫色面具 (6).mp4\r3b974835a30635e90de3ec3b589a9456 紫色面具 (7).mp4\r5950f2f2b6be317e42a1b00fe34fb19f 紫色面具 (8).mp4\rbc05491e17a35a7b739363459b8ad8b6 紫色面具 (9).mp4 "},{"id":9,"href":"/posts/2024-11-03/","title":"Faker第五冠,为了所有支持者!","section":"日记本","content":" 恭喜Faker第五冠！ # 2024全球总局赛视频 # 第一局 # 第二局 # 第三局 # 第四局 # 第五局 # "},{"id":10,"href":"/posts/2024-07-08/","title":"沙特石油杯EWC,成就双底座赛区的荣光!","section":"日记本","content":" 总决赛(第二底座) # 第一局 # 第二局 # 第三局 # 第四局 # 1/4决赛(第一底座) # 第一局 # 第二局 # 第三局 # "},{"id":11,"href":"/posts/2023-11-19/","title":"Faker第四冠,为了队友!","section":"日记本","content":" 2023全球总决赛 # 第一局 # 第二局 # 第三局 # "},{"id":12,"href":"/posts/2023-09-29/","title":"四金一铜,英雄联盟!","section":"日记本","content":" 2022杭州亚运冠军集体照！ # 亚运总决赛视频 # 第一局:韩国1-0中华台湾 # 第二局:韩国2-0中华台湾,我们是冠军! # 亚运半决赛 # 第一局 韩国1-0中国 # 第二局 韩国2-0中国 # 季军争夺战！ # 第一局:越南1-0中国 # 第二局: 越南1-1中国 # 第三局:越南1-2中国,我们是季军！ # "},{"id":13,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F/","title":"安装系统","section":"服务器","content":" 服务器安装 # 清华镜像下载 软碟通 王涛 7C81-1689-4046-626F 只要下载4G左右的,1G以下是网络安装版,7G以上是教育版(内置的软件不同) 命令查找 初始化安装 # echo \u0026#34;deb http://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmware\u0026#34; | sudo tee /etc/apt/sources.list\rwget ali.mm/debian/config.tgz\rsudo tar -zxvf config.tgz -C /\rrm config.tgz 容器优化 # cat \u0026gt; proxy.conf \u0026lt;\u0026lt; EOF\r[Service]\rEnvironment=\u0026#34;HTTP_PROXY=http://x:x@127.1:10086\u0026#34;\rEnvironment=\u0026#34;HTTPS_PROXY=http://x:x@127.1:10086\u0026#34;\rEnvironment=\u0026#34;NO_PROXY=localhost,127.0.0.1,.cn\u0026#34;\rEOF\rsudo mkdir /etc/systemd/system/docker.service.d\rsudo mv proxy.conf /etc/systemd/system/docker.service.d\rsudo apt install -y docker.io 网络优化 # "},{"id":14,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E7%A1%AC%E7%9B%98%E4%BD%BF%E7%94%A8/","title":"硬盘使用","section":"服务器","content":" 硬盘使用 # 移动硬盘 格式化+挂载 # sudo apt install -y exfatprogs sudo mkfs.exfat /dev/sda sudo mount /dev/sda /home/nginx/samsung/ "},{"id":15,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F/","title":"调试程序","section":"服务器","content":" 程序调试 # 安装调试工具+开启远程 # 需重启sshd apt install -y apt-file | apt-file update echo \u0026#34;X11UseLocalhost no\u0026#34; \u0026gt;\u0026gt; /etc/ssh/sshd_config Apt使用 # #apt-file -h list|show \u0026lt;pattern\u0026gt; List files in packages search|find \u0026lt;pattern\u0026gt; Search files in packages update Fetch Contents files from apt-sources. #apt install --print-uris tree #显示下载链接 \u0026#39;http://mirrors.tuna.tsinghua.edu.cn/debian/pool/main/t/tree/tree_2.1.0-1_amd64.deb\u0026#39; tree_2.1.0-1_amd64.deb 52464 MD5Sum:a12f30705b94d891f14bd5199fe6f4f2 "},{"id":16,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/","title":"官方文档","section":"服务器","content":" 官方文档 # nginx配置 # cat \u0026gt; /etc/nginx/sites-enabled/84.conf \u0026lt;\u0026lt;EOF server { listen 84; charset \u0026#39;utf-8\u0026#39;; location /json/{autoindex on;alias /var/www/docs;} } EOF 下载部署 # cd /tmp wget https://github.com/twbs/bootstrap/releases/download/v5.3.3/bootstrap-5.3.3-examples.zip unzip bootstrap-5.3.3-examples.zip mv bootstrap-5.3.3-examples /var/www/docs/bootstrap5.3.3 rm bootstrap-5.3.3-examples.zip cd /tmp wget https://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.4.1/hadoop-3.4.1.tar.gz tar -zxvf hadoop-3.4.1.tar.gz mv hadoop-3.4.1/share/doc/hadoop /var/www/docs/hadoop3.4.1 rm hadoop-3.4.1* -rf "},{"id":17,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%95%9C%E5%83%8F%E7%BD%91%E7%AB%99/","title":"镜像网站","section":"服务器","content":" 镜像网站 # 镜像 清华 南科 阿里 华为 Debian 新× Apache Maven "},{"id":18,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AF%87/hadoop3.4.1-%E8%AE%A1%E7%AE%97%E7%AF%87/","title":"Hadoop3.4.1 计算篇","section":"分布式篇","content":" hadoop计算篇 # 源码(内有WordCount)\n3.4.1文档 备用\n启动示例 # hadoop jar $HADOOP_HOME/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.4.1.jar wordcount /1.csv `date +%m%d-%H%M` 源码编译 # WordCount.java hadoop com.sun.tools.javac.Main WordCount.java jar cf wc.jar WordCount*.class hadoop jar wc.jar WordCount /1.csv `date +%m%d-%H%M` # https://files.pilookup.com/pi/1-100000000.zip hadoop com.sun.tools.javac.Main WordCount.java jar cf wc.jar WordCount*.class hadoop jar wc.jar WordCount /1-100000000.txt `date +%m%d-%H%M` sed -i \u0026ldquo;16 i yarn.nodemanager.resource.memory-mb1024\u0026rdquo; /opt/hadoop-3.4.1/etc/hadoop/yarn-site.xml\nsed -i \u0026ldquo;16 i yarn.nodemanager.resource.cpu-vcores1\u0026rdquo; /opt/hadoop-3.4.1/etc/hadoop/yarn-site.xml\n"},{"id":19,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AF%87/hive4.0.1/","title":"Hive4.0.1","section":"分布式篇","content":" hive4.0.1安装部署 # 目前hive4.0.1+hadoop3.4.1+jdk11.0.24,正常使用 多注意日志中关于用户权限的问题 官方镜像中 hive4.0.1 匹配 hadoop3.3.6 https://hive.apache.org/docs/latest/manual-installation_283118363/ 下载安装 # hadoop的鉴权+文件权限要注意 sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;hadoop.proxyuser.hadoop.hosts\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;*\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/core-site.xml sed -i \u0026#34;20 i \u0026lt;property\u0026gt;\u0026lt;name\u0026gt;hadoop.proxyuser.hadoop.groups\u0026lt;/name\u0026gt;\u0026lt;value\u0026gt;*\u0026lt;/value\u0026gt;\u0026lt;/property\u0026gt;\u0026#34; ${HADOOP_HOME}/etc/hadoop/core-site.xml wget https://mirrors.aliyun.com/apache/hive/hive-4.0.1/apache-hive-4.0.1-bin.tar.gz tar -zxvf apache-hive-4.0.1-bin.tar.gz mv apache-hive-4.0.1-bin hive mv hive /opt/ sudo sed -i \u0026#39;$aexport HIVE_HOME=/opt/hive\u0026#39; /etc/profile sudo sed -i \u0026#39;$aPATH=\\$PATH:\\$HIVE_HOME/bin/\u0026#39; /etc/profile sudo sed -i \u0026#39;$aalias beelinehive=\u0026#34;beeline -u jdbc:hive2://127.0.0.1:10000/\u0026#34;\u0026#39; /etc/profile source /etc/profile hadoop fs -mkdir /tmp hadoop fs -mkdir -p /user/hive/ hadoop fs -chmod +rwx /tmp hadoop fs -chmod +w /user/hive/ 使用MySQL # host:ali.mm username:zian passwd:zian wget -P $HIVE_HOME/lib https://repo1.maven.org/maven2/mysql/mysql-connector-java/5.1.49/mysql-connector-java-5.1.49.jar cp $HIVE_HOME/conf/hive-default.xml.template $HIVE_HOME/conf/hive-site.xml sed -i \u0026#34;s|jdbc:derby:;databaseName=metastore_db;create=true|jdbc:mysql://ali.mm:3306/zian|g\u0026#34; $HIVE_HOME/conf/hive-site.xml sed -i \u0026#34;s|org.apache.derby.jdbc.EmbeddedDriver|com.mysql.jdbc.Driver|g\u0026#34; $HIVE_HOME/conf/hive-site.xml sed -i \u0026#34;s|APP|zian|g\u0026#34; $HIVE_HOME/conf/hive-site.xml sed -i \u0026#34;s|mine\u0026lt;|zian\u0026lt;|g\u0026#34; $HIVE_HOME/conf/hive-site.xml sed -i \u0026#34;s|system:||g\u0026#34; $HIVE_HOME/conf/hive-site.xml schematool -dbType mysql -initSchema nohup hiveserver2 \u0026amp; 使用Derby # 要注意文件目录的位置,schematool在当前目录下生成文件 schematool -dbType derby -initSchema nohup hiveserver2 \u0026amp; 1亿数据生成代码 导入csv文件 CREATE TABLE IF NOT EXISTS md5 (id STRING,md5 STRING) row format delimited fields terminated by \u0026#39;,\u0026#39; stored as textfile; load data inpath \u0026#39;/md5.txt\u0026#39; into table md5; 生成代码 import org.apache.commons.codec.digest.DigestUtils; import java.io.BufferedWriter; import java.io.FileWriter; public class MD5 { public static void main(String[] args) throws Exception { final int number = 10000*10000; final int round = 1000; StringBuffer string = new StringBuffer(); //FileWriter需要添加true参数才会有添加效果 BufferedWriter writer = new BufferedWriter(new FileWriter(\u0026#34;z:/md5.txt\u0026#34;, true)); for (int y = 0; y \u0026lt;= Math.abs(number / round); y++) { for (int x = 0; x \u0026lt; round + 1 \u0026amp;\u0026amp; x + y * round \u0026lt; number; x++) { String data = \u0026#34;00000000\u0026#34;; data += String.valueOf(x + y * round); data = data.substring(data.length() - 8); data = data + \u0026#34;,\u0026#34; + DigestUtils.md5Hex(data) + \u0026#34;\\n\u0026#34;; string.append(data); } writer.append(string); string = new StringBuffer(); } writer.flush(); } } HQL # 默认日志位置 /tmp/启动的用户名/hive.log 需要注意在日志中出现的文件权限问题 CREATE TABLE IF NOT EXISTS testtable (id INT,name STRING); insert into testtable VALUES (1,\u0026#34;li\u0026#34;),(2,\u0026#34;xiang\u0026#34;),(3,\u0026#34;he\u0026#34;); select * from testtable; 保存结果到本地磁盘local insert overwrite local directory \u0026#34;/tmp/out/1\u0026#34; row format delimited fields terminated by \u0026#34;|\u0026#34; select * from testtable; 保存结果到hdfs(无local) insert overwrite directory \u0026#34;/tmp/out/2\u0026#34; row format delimited fields terminated by \u0026#34;|\u0026#34; select * from testtable; tez 引擎(官方推荐的引擎,MR可以用但过时) # https://blog.csdn.net/cc__cc___/article/details/134690366 https://mirrors.aliyun.com/apache/tez/0.10.4/apache-tez-0.10.4-bin.tar.gz wget https://mirrors.aliyun.com/apache/tez/0.10.4/apache-tez-0.10.4-bin.tar.gz tar -zxvf apache-tez-0.10.4-bin.tar.gz -C /opt/ --transform=\u0026#34;s|apache-tez-0.10.4-bin|tez|g\u0026#34; sudo sed -i \u0026#39;$aexport TEZ_HOME=/opt/tez\u0026#39; /etc/profile source /etc/profile cat \u0026gt; $TEZ_HOME/conf/tez-site.xml \u0026lt;\u0026lt; EOF \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;!-- 指定在hdfs上的tez包文件 --\u0026gt; \u0026lt;property\u0026gt; \u0026lt;name\u0026gt;tez.lib.uris\u0026lt;/name\u0026gt; \u0026lt;value\u0026gt;hdfs://master:9000/user/tez/tez.tar.gz\u0026lt;/value\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;/configuration\u0026gt; EOF hive.execution.enginetez mapreduce.framework.name修改为yarn-tez\nmr修改为tez\n/opt/hive/conf/hive-site.xml sed -i \u0026ldquo;s|mr|tez|g\u0026rdquo; $HIVE_HOME/conf/hive-site.xml $TEZ_HOME/share/tez.tar.gz hadoop fs -mkdir /user/tez/ -p hadoop fs -put $TEZ_HOME/share/tez.tar.gz /user/tez\nsudo sed -i \u0026lsquo;$aexport HADOOP_CLASSPATH=hadoop classpath\u0026rsquo; /etc/profile sudo sed -i \u0026lsquo;$aexport TEZ_CONF_DIR=$HADOOP_CONF_DIR\u0026rsquo; /etc/profile sudo sed -i \u0026lsquo;$aexport TEZ_JARS=$TEZ_HOME/.jar:$TEZ_HOME/lib/.jar\u0026rsquo; /etc/profile sudo sed -i \u0026lsquo;$aexport HADOOP_CLASSPATH=$TEZ_CONF_DIR:$TEZ_JARS:$HADOOP_CLASSPATH\u0026rsquo; /etc/profile\nhttps://blog.csdn.net/cc__cc___/article/details/134690366\ntez+hadoop https://blog.csdn.net/qq_38628046/article/details/124775470\n临时使用可在beeline执行 set hive.execution.engine=tez; set hive.execution.engine=mr;\n"},{"id":20,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3/%E4%BB%A3%E7%90%86%E4%BD%BF%E7%94%A8/","title":"代理使用","section":"容器相关","content":" 代理使用 # Docker配置代理 # /etc/systemd/system/docker.service.d [Service] Environment=\u0026#34;HTTP_PROXY=http://x:x@172.22.43.127:10086\u0026#34; Environment=\u0026#34;HTTPS_PROXY=http://x:x@172.22.43.127:10086\u0026#34; Environment=\u0026#34;NO_PROXY=localhost,127.0.0.1,.cn\u0026#34; 重启服务 # sudo systemctl daemon-reload sudo systemctl restart docker "},{"id":21,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3/%E5%AE%B9%E5%99%A8%E8%B5%84%E6%96%99/","title":"容器资料","section":"容器相关","content":" Docker相关 # FROM scratch\r#debian12.x --force-rm\rADD rootfs.tar.xz /\rENV TZ=\u0026#39;CST-8\u0026#39; LANG=\u0026#39;zh_CN.UTF-8\u0026#39;\r# 笔记本盒盖问题+apt清华源\r# 安装openssh-server时要确认,使用echo管道\r# 解决sshd时中文显示错误问题(apt安装语言包locales),bash下可以不用\r# 中文汉化,通过find /etc -mtime -1找到dpkg-reconfigure locales的不同,确定是/etc/default/locale文件\r# 添加docker用户不设密码\rRUN echo \u0026#34;HandleLidSwitch=lock\u0026#34; \u0026gt;\u0026gt; /etc/systemd/logind.conf \u0026amp;\u0026amp;\\\rsed -i \u0026#34;s|deb.debian.org|mirrors.tuna.tsinghua.edu.cn|g\u0026#34; /etc/apt/sources.list.d/debian.sources \u0026amp;\u0026amp;\\\rapt update \u0026amp;\u0026amp;\\\recho \u0026#39;y\u0026#39; | apt install -y bash-completion curl iproute2 iputils-ping locales net-tools openssh-server sudo vim-tiny wget \u0026amp;\u0026amp;\\\rmkdir /run/sshd \u0026amp;\u0026amp;\\\rapt clean \u0026amp;\u0026amp;\\\recho \u0026#34;zh_CN.UTF-8 UTF-8\u0026#34; \u0026gt; /etc/locale.gen \u0026amp;\u0026amp;\\\recho \u0026#34;LANG=zh_CN.UTF-8\u0026#34; \u0026gt; /etc/default/locale \u0026amp;\u0026amp;\\\rlocale-gen \u0026amp;\u0026amp;\\\recho \u0026#34;source /etc/profile\u0026#34; \u0026gt;\u0026gt; /root/.bashrc \u0026amp;\u0026amp;\\\recho \u0026#34;clear\u0026#34; \u0026gt;\u0026gt; /root/.bashrc \u0026amp;\u0026amp;\\\ruseradd -ms/bin/bash -k/etc/skel/ docker \u0026amp;\u0026amp;\\\rusermod -aG sudo docker \u0026amp;\u0026amp;\\\recho docker:. | chpasswd\r# 里面有部分配置文件\rADD config.tgz /\r# 修改系统所有文件时间,(软链接/lib与/lib64需要添加-h如 touch -h /sbin -t 197001010800.00),方便以后查找\rRUN find /* -path /sys -prune -o -path /proc -prune -o -exec touch -ht 197001010000.00 {} \\;\r# 这里不能像centos7直接加参数\rCMD /usr/sbin/sshd -D "},{"id":22,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/ollama/","title":"Ollama","section":"软件使用","content":" deepseek # https://ollama.com/ https://ollama.com/download/OllamaSetup.exe docker pull ollama/ollama ollama run deepseek-r1:1.5b ollama run deepseek-r1:8b Linux # curl -fsSL https://ollama.com/install.sh | sh 写一部以\u0026quot;我儿王腾有大帝之资\u0026quot;为题材的小说 ollama\nhttps://www.amd.com/en/developer/resources/rocm-hub/hip-sdk.html\nhttps://www.amd.com/zh-cn/developer/resources/rocm-hub/hip-sdk.html\nollama serve\nsysbench # \u0026ndash;help Compiled-in tests: fileio - File I/O test cpu - CPU performance test memory - Memory functions speed test threads - Threads subsystem performance test mutex - Mutex performance test apt install -y sysbench sysbench cpu run sysbench root@zian:/home/nginx# sysbench cpu run sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3) Running the test with following options: Number of threads: 1 Initializing random number generator from current time Prime numbers limit: 10000 Initializing worker threads... Threads started! CPU speed: events per second: 996.02 General statistics: total time: 10.0094s total number of events: 9972 Latency (ms): min: 1.00 avg: 1.00 max: 1.86 95th percentile: 1.01 sum: 9999.25 Threads fairness: events (avg/stddev): 9972.0000/0.00 execution time (avg/stddev): 9.9992/0.00 阿里云服务器上的 # chmod +x deepseek #!/bin/bash nohup curl http://127.0.0.1:11434/api/generate -d \u0026#39;{\u0026#34;model\u0026#34;:\u0026#34;deepseek-r1:1.5b\u0026#34;,\u0026#34;stream\u0026#34;:false,\u0026#34;prompt\u0026#34;:\u0026#34;\u0026#39;$1\u0026#39;\u0026#34;}\u0026#39; -o `date +%m%d-%H%M`${1}.txt \u0026amp; https://gh.llkk.cc/https://github.com/ollama/ollama/releases/download/v0.5.7/ollama-linux-amd64.tgz https://github.com/ollama/ollama/releases/latest/download/ollama-linux-amd64.tgz https://ollama.com/download/ollama-linux-amd64.tgz\n"},{"id":23,"href":"/docs/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/wget/","title":"Wget","section":"软件使用","content":" wget使用 # 下载所有能遍历的目录及文件(爬虫) # wget -r -np -nH -R index.html http://127.0.0.1/\n# "},{"id":24,"href":"/docs/%E7%AC%94%E8%AE%B0%E6%9C%AC/win11-ltsc/%E6%89%A9%E5%B1%95%E5%91%BD%E4%BB%A4/","title":"扩展命令","section":"windows 11","content":" 扩展命令 # powershell虽然好用,但是命令与Linux差别巨大 wget hugo "},{"id":25,"href":"/docs/%E7%AC%94%E8%AE%B0%E6%9C%AC/win11-ltsc/%E8%99%8E%E7%89%99%E6%8E%A8%E6%B5%81/","title":"虎牙推流","section":"windows 11","content":" 虎牙推流 # 虎牙直播 # -re (input) 以本机帧速率读取输入。这相当于设置-readrate 1。 -stream_loop number (input) 设置输入流应循环的次数。Loop 0表示无循环，loop-1表示无限循环。 -codec[:stream_specifier] codec (input/output,per-stream)为一个或多个流选择编码器（当在输出文件之前使用时）或解码器（当在输入文件之前使用时）。codec是解码器/编码器的名称或特殊值copy（仅输出），指示流不被重新编码。 -c: copy 表示所有流格式都是复制 nohup ffmpeg -re -stream_loop -1 -i bbb.mp4 -c: copy -f flv \u0026#34;rtmp://al.direct.huya.com/huyalive/1787660552-1787660552-7438266878141176820-3575444560-10057-A-1731860186-1?seq=1731856465590\u0026amp;type=simple\u0026#34; \u0026amp; 最快的剪辑视频 # ffmpeg -ss 1:25 -i 3.2_CG16_2_mux.mp4 -c: copy bbb.mp4 "},{"id":26,"href":"/docs/%E7%AC%94%E8%AE%B0%E6%9C%AC/win11-ltsc/%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD/","title":"资源下载","section":"windows 11","content":" 资源下载 # win11x64\n开发软件 # webstorm(非商业免费) idea goland WebStorm 2024.2.4 及更新版本才可以获取非商业许可证。 非商业订阅的期限为一年，一年后将自动续订\n"},{"id":27,"href":"/docs/%E7%AC%94%E8%AE%B0%E6%9C%AC/linux/%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/","title":"系统推荐","section":"笔记本","content":" 系统推荐 # Cinnamon是debian官方维护的桌面系统，是debian中的一个桌面，个人感觉比较好看\n使用默认安装即可\n"},{"id":28,"href":"/docs/%E5%85%B6%E4%BB%96%E8%AE%BE%E5%A4%87/%E6%97%A7%E7%89%88%E7%B3%BB%E7%BB%9F/","title":"旧版系统","section":"硬件库","content":" 旧版系统 # win 10 ltsc # 下载 ed2k://|file|LTSC_2021_X64.ISO|5044211712|1555B7DCA052B5958EE68DB58A42408D|/\nwin 7 # 专业版VL\n旗舰版下载 ed2k://|file|windows_7_ultimate_x64.iso|3419052032|56E90251E665E643C81168F6DD870BCB|/ win7旗舰版不能用kms激活。\nchrome浏览器取消不更新提醒chrome.reg Windows Registry Editor Version 5.00 [HKEY_CURRENT_USER\\Software\\Policies\\Google\\Chrome] \u0026#34;SuppressUnsupportedOSWarning\u0026#34;=dword:00000001 QQ拼音输入法 激活win7pro vl版 slmgr /skms kms.03k.org slmgr /ato 虚拟机安装 # 管理器右侧新建虚拟网络交换机\u0026ndash;连接类型\u0026ndash;外部网络 第一代虚拟机 4G内存+关闭动态(否则win7安装不了) 虚拟机设置网络适配器\u0026ndash;高级功能\u0026ndash;静态MAC "},{"id":29,"href":"/docs/%E5%85%B6%E4%BB%96%E8%AE%BE%E5%A4%87/%E7%A1%AC%E7%9B%98%E5%88%86%E7%B1%BB/","title":"硬盘分类","section":"硬件库","content":" 硬盘分类 # 硬盘型号 容量 系统 备注 机械盘 希捷500G exfat 数据盘 机械盘 三星500G exfat 数据盘 机械盘 三星250G Win7pro 三星台式系统盘 机械盘 500G 神舟 机械盘 140G win7专业版 郎科 64G LTSC2021 闪迪 16G 长城 16G 长城 8G Debian12.8 debian-12.8.0-amd64-DVD-1.iso版 浪潮 4G 预 笔记本用,台式机会识别出软驱无法使用 "},{"id":30,"href":"/docs/%E5%85%B6%E4%BB%96%E8%AE%BE%E5%A4%87/%E8%AE%BE%E5%A4%87%E8%B5%84%E6%96%99/","title":"设备资料","section":"硬件库","content":" 设备资料 # 台式机 # F2:进入BIOS ESC:选择启动盘 三星 DM-Z250 win7x64英特尔驱动 win7x64网卡驱动 笔记本 # 8852ae驱动 "},{"id":31,"href":"/docs/%E4%BB%A3%E7%A0%81%E5%BA%93/%E4%B8%BB%E9%A2%98%E6%95%99%E7%A8%8B/","title":"主题教程","section":"代码库","content":" 主题教程 # 短码使用 # content\\docs*.md中引用 {{\u0026lt; video src=\u0026#34;/1.mp4\u0026#34; \u0026gt;}}{{\u0026lt; /video \u0026gt;}} 在短码中配置(layouts/shortcodes/video.html) \u0026lt;video controls width=\u0026#34;100%\u0026#34;\u0026gt; \u0026lt;source {{ with .Get \u0026#34;src\u0026#34; }} src=\u0026#34;{{.}}\u0026#34; {{ end }} type=\u0026#34;video/mp4\u0026#34; /\u0026gt; {{ .Inner }} \u0026lt;/video\u0026gt; 图片相对文件位置 # ./post/1111-11-11.md引用当前目录下1.jpg编译后路径为./post/1111-11-11/1.jpg ./post/1111-11-11/index.md引用当前目录下1.jpg编译后路径为./post/1111-11-11/1.jpg ./post/1111-11-11/_index.md为子节点不要写文章,叶子节点的为index.md "},{"id":32,"href":"/docs/%E4%BB%A3%E7%A0%81%E5%BA%93/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%BA%90/","title":"前端资源","section":"代码库","content":" 前端资料 # WebStorm # 下载地址 https://www.jetbrains.com/webstorm/download/other.html\nBootstrap5.3 # 首页 https://getbootstrap.com/\n源码+示例 https://github.com/twbs/bootstrap/releases\nVue # https://cn.vuejs.org/\n网络问题先执行以下 npm config set registry https://registry.npmmirror.com "},{"id":33,"href":"/docs/%E4%BB%A3%E7%A0%81%E5%BA%93/%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/","title":"执行脚本","section":"代码库","content":" 服务器常用脚本 # 参考资料 https://github.com/fengyuhetao/shell\n常用定时器 # 自动休眠 清楚内存 更新容器内的git项目 定时器日志需要安装邮箱 apt install postfix -y (选择5. Local only)日志在/var/mail/用户下 */10 * * * * /usr/powersave.sh\r*/10 * * * * echo 3 \u0026gt; /proc/sys/vm/drop_caches\r0 */2 * * * docker exec zian updategit powersave.sh # 让机械硬盘休眠 让系统休眠 #!/bin/bash\rlogintime=`last docker --time-format iso | head -n1 | awk \u0026#39;{print $6}\u0026#39;`\r#logintime=\u0026#34;2024-09-11T07:18:18+08:00\u0026#34;\rif [ ${#logintime} -eq 6 ];then\rdate\recho \u0026#34;docker there\u0026#34;\relse\rlogintime=`date -d $logintime +%s`\rlogintime=$(expr $logintime)\rnow=$(expr `date +%s`)\rnow=$(expr $now - $logintime)\rif [ $now -gt 7200 ] ;then\rsystemctl suspend\relse\recho \u0026#34;docker leave\u0026#34; $now\rfi\rfi updategit # #!/bin/bash\rcd /var/www/\rcommand -v unzip \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || apt install -y unzip\rwget github.com/zi-an/zi-an.github.io/archive/refs/heads/master.zip\runzip -o master.zip\rrm master.zip kaibo.sh # #!/bin/bash\rcommand -v ffmpeg \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || apt install -y ffmpeg\rnohup ffmpeg -re -stream_loop -1 -i bbb.mp4 -c: copy -f flv \u0026#34;$1\u0026#34; \u0026amp; alias # alias zian=\u0026#34;docker exec -it zian bash\u0026#34;\ralias xunlei=\u0026#34;docker exec -it xunlei bash\u0026#34;\ralias maomiav=\u0026#34;docker exec -it maomiav bash\u0026#34;\ralias transmission=\u0026#34;docker exec -it transmission bash\u0026#34;\ralias transmission=\u0026#34;docker exec -it transmission bash\u0026#34;\ralias v2rayalog=\u0026#34;docker logs -fn20 v2raya\u0026#34;\ralias dockerps=\u0026#34;docker ps -a --format \u0026#39;table {{.Names}}\\t{{.Status}}\u0026#39;\u0026#34; "},{"id":34,"href":"/docs/%E4%BB%A3%E7%A0%81%E5%BA%93/%E4%BB%A3%E7%A0%81%E7%BC%96%E8%AF%91/","title":"代码编译","section":"代码库","content":" 代码编译 # main.go # go build main.go package main\rimport (\r\u0026#34;fmt\u0026#34;\r\u0026#34;io\u0026#34;\r\u0026#34;net/http\u0026#34;\r\u0026#34;net/url\u0026#34;\r\u0026#34;os\u0026#34;\r\u0026#34;os/exec\u0026#34;\r\u0026#34;strings\u0026#34;\r\u0026#34;time\u0026#34;\r)\rfunc main() {\rInit()\rserver := \u0026amp;http.Server{\rAddr: \u0026#34;0.0.0.0:8888\u0026#34;,\r}\rmux := http.NewServeMux()\rmux.HandleFunc(\u0026#34;/get\u0026#34;, get)\rmux.HandleFunc(\u0026#34;/post\u0026#34;, post)\rmux.HandleFunc(\u0026#34;/m3u8er\u0026#34;, m3u8er)\rmux.HandleFunc(\u0026#34;/noter\u0026#34;, noter)\rserver.Handler = mux\r_ = server.ListenAndServe()\r}\rfunc Init() {\rdirs := []string{\u0026#34;/home/nginx/m3u8/\u0026#34;, \u0026#34;/home/nginx/note/\u0026#34;}\rfor _, dir := range dirs {\r_, err := os.Stat(dir)\rif err == nil {\r_ = os.MkdirAll(dir, 0777)\r}\r}\r}\r// 获取客户端信息\rfunc get(w http.ResponseWriter, r *http.Request) {\rwrite := \u0026#34;ip:\u0026#34; + r.Header.Get(\u0026#34;X-Real-IP\u0026#34;) + \u0026#34;\\n\u0026#34;\rfor k, v := range r.Header {\rwrite = write + k + \u0026#34;:\u0026#34; + strings.Join(v, \u0026#34;;\u0026#34;) + \u0026#34;\\n\u0026#34;\r}\r_, _ = w.Write([]byte(write))\r}\r// 文件上传\r// 测试数据: curl http://127.0.0.1:8888/post -F file=@bank.jpg -H \u0026#34;Referer: http://127.0.0.1/?from=/upload/\u0026#34;\rfunc post(w http.ResponseWriter, r *http.Request) {\rfrom := r.Header.Get(\u0026#34;Referer\u0026#34;)\rfrom = from[strings.Index(from, \u0026#34;=/\u0026#34;)+1 : len(from)] //获取相对地址\rswitch r.Method {\rcase \u0026#34;GET\u0026#34;:\r_, _ = w.Write([]byte(string(\u0026#34;method is GET\u0026#34;)))\rcase \u0026#34;POST\u0026#34;:\r_ = r.ParseForm()\rimgFile, _, _ := r.FormFile(\u0026#34;file\u0026#34;) //获取文件内容\rdefer imgFile.Close()\rfiles := r.MultipartForm.File //获取表单中的信息\rimgName := files[\u0026#34;file\u0026#34;][0].Filename //获取表单文件中name为file的数据\rimgName = \u0026#34;.\u0026#34; + from + imgName\r_, err := os.Stat(imgName) //判断文件是否存在,在则隐藏并添加时间戳\rif err == nil {\rloc, _ := time.LoadLocation(\u0026#34;Asia/Taipei\u0026#34;)\rnewName := \u0026#34;.\u0026#34; + from + \u0026#34;.\u0026#34; + files[\u0026#34;file\u0026#34;][0].Filename + \u0026#34;.\u0026#34; + time.Now().In(loc).Format(\u0026#34;20060102_150405\u0026#34;)\r_ = os.Rename(imgName, newName)\r}\rsaveFile, _ := os.Create(imgName)\r_ = saveFile.Close()\r_, _ = io.Copy(saveFile, imgFile) //保存\rhttp.Redirect(w, r, \u0026#34;/?from=\u0026#34;+from, http.StatusSeeOther)\rdefault:\rfmt.Print(\u0026#34;error method\u0026#34;)\r}\r}\r// m3u8下载\rfunc m3u8er(w http.ResponseWriter, r *http.Request) {\ruri := r.PostFormValue(\u0026#34;uri\u0026#34;)\ruri, _ = url.QueryUnescape(uri)\rname := r.PostFormValue(\u0026#34;name\u0026#34;)\rfmt.Println(uri, \u0026#34;:\u0026#34;, name)\r_ = exec.Command(\u0026#34;m3u8downloader\u0026#34;, uri, name).Run()\rhttp.Redirect(w, r, \u0026#34;/?from=/m3u8/\u0026#34;, http.StatusSeeOther)\r}\rfunc noter(w http.ResponseWriter, r *http.Request) {\rnote := r.PostFormValue(\u0026#34;note\u0026#34;)\rfile, _ := os.OpenFile(\u0026#34;/home/nginx/note/note.log\u0026#34;, os.O_RDWR|os.O_CREATE|os.O_APPEND, 0666)\rloc, _ := time.LoadLocation(\u0026#34;Asia/Taipei\u0026#34;)\r_, _ = file.WriteString(time.Now().In(loc).Format(\u0026#34;0102_1504: \u0026#34;) + note + \u0026#34;\\n\u0026#34;)\rhttp.Redirect(w, r, \u0026#34;/?from=/note/\u0026#34;, http.StatusSeeOther)\r} "},{"id":35,"href":"/docs/%E4%BB%A3%E7%A0%81%E5%BA%93/%E5%9C%86%E5%91%A8%E8%AE%A1%E7%AE%97/","title":"圆周计算","section":"代码库","content":" 计算圆周率 # 圆周率查询 https://www.pilookup.com/zh-cn/ 圆周率下载 https://www.pilookup.com/zh-cn/download.html 源代码 https://www.kurims.kyoto-u.ac.jp/~ooura/pi_fft.html 最大ftt值为536870912大约512M内存 使用FFT+AGM代码计算 # apt install gcc make -y\rwget https://www.kurims.kyoto-u.ac.jp/~ooura/pi_fftc6_src.tgz\rtar -zxvf pi_fftc6_src.tgz\rcd pi_fftc6/\rsed -i \u0026#34;s|-fast|-Ofast|g\u0026#34; Makefile_64bit\rsed -i \u0026#39;s|scanf(\u0026#34;%lg\u0026#34;, \u0026amp;x)|x=100000|g\u0026#39; pi_fftcw.c\rmake -f Makefile_64bit\rnohup ./pi_cw \u0026amp;\rcat pi.dat 四行代码求圆周率 # 资料 https://cs.uwaterloo.ca/~alopez-o/math-faq/mathtext/node12.html pi.c如下,执行 * gcc pi.c \u0026amp;\u0026amp; ./a.out * #include \u0026lt;stdio.h\u0026gt;\rint a=10000,b,c=2800,d,e,f[2801],g;\rvoid main(){\rfor(;b-c;)f[b++]=a/5;\rfor(;d=0,g=c*2;c-=14,printf(\u0026#34;%.4d\u0026#34;,e+d/a),e=d%a)for(b=c;d+=f[b]*a,\rf[b]=d%--g,d/=g--,--b;d*=b);} 下载 # wget https://files.pilookup.com/pi/1-100000000.zip\rwget https://files.pilookup.com/pi/100000001-200000000.zip\rwget https://files.pilookup.com/pi/200000001-300000000.zip wget https://files.pilookup.com/pi/300000001-400000000.zip wget https://files.pilookup.com/pi/400000001-500000000.zip wget https://files.pilookup.com/pi/500000001-600000000.zip wget https://files.pilookup.com/pi/600000001-700000000.zip wget https://files.pilookup.com/pi/700000001-800000000.zip wget https://files.pilookup.com/pi/800000001-900000000.zip wget https://files.pilookup.com/pi/900000001-1000000000.zip "},{"id":36,"href":"/docs/%E4%BB%A3%E7%A0%81%E5%BA%93/%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE/","title":"域名配置","section":"代码库","content":" 域名配置 # 100-125 # 127.0.0.1 x.mm 120.76.158.149 ali.mm 127.0.0.1 update.miui.com 10.0.0.100 100.mm 10.0.0.101 101.mm 10.0.0.102 102.mm 10.0.0.103 103.mm 10.0.0.104 104.mm 10.0.0.105 105.mm 10.0.0.106 106.mm 10.0.0.107 107.mm 10.0.0.108 108.mm 10.0.0.109 109.mm 10.0.0.110 110.mm 10.0.0.111 111.mm 10.0.0.112 112.mm 10.0.0.113 113.mm 10.0.0.114 114.mm 10.0.0.115 115.mm 10.0.0.116 116.mm 10.0.0.117 117.mm 10.0.0.118 118.mm 10.0.0.119 119.mm 10.0.0.120 120.mm 200~225 # 10.0.0.200 200.mm 10.0.0.201 201.mm 10.0.0.202 202.mm 10.0.0.203 203.mm 10.0.0.204 204.mm 10.0.0.205 205.mm 10.0.0.206 206.mm 10.0.0.207 207.mm 10.0.0.208 208.mm 10.0.0.209 209.mm 10.0.0.210 210.mm 10.0.0.211 211.mm 10.0.0.212 212.mm 10.0.0.213 213.mm 10.0.0.214 214.mm 10.0.0.215 215.mm 10.0.0.216 216.mm 10.0.0.217 217.mm 10.0.0.218 218.mm 10.0.0.219 219.mm 10.0.0.220 220.mm 10.0.0.221 221.mm 10.0.0.222 222.mm 10.0.0.223 223.mm 10.0.0.224 224.mm 10.0.0.225 225.mm "}]